import{M as A,L as B,B as C}from"./leancloud-service-D8PKWX6z.js";import{d as b,g as c,h as k,i as I,c as N,e as s,w as a,u as e,o as y,N as d,j as r,a as t,k as _,P as M,t as u,C as S,A as x,l as z,_ as F}from"./index-DXhrB1zA.js";const L={class:"training-home"},R={class:"stat-content"},O={class:"stat-icon"},G={class:"stat-info"},H={class:"stat-value"},P={class:"stat-content"},U={class:"stat-icon"},V={class:"stat-info"},j={class:"stat-value"},D={class:"stat-content"},E={class:"stat-icon"},T={class:"stat-info"},q={class:"stat-value"},J=b({__name:"Home",setup(K){const v=c(0),f=c(0),m=c(0),p=async()=>{try{const n=await A.getAllMembers();v.value=n.filter(l=>l.stage!=="紫夜"&&l.stage!=="未新训").length;const o=await B.getAllLeaveRecords();f.value=o.filter(l=>l.status==="请假中"||l.status==="等待销假").length;const g=await C.getAllBlacklistRecords(),w=new Set(g.map(l=>l.memberId));m.value=w.size}catch(n){console.error("Failed to load stats:",n)}};let i=null;const h=()=>{i=window.setInterval(async()=>{await p()},6e4)};return k(async()=>{await p(),h()}),I(()=>{i&&clearInterval(i)}),(n,o)=>(y(),N("div",L,[s(e(z),{"x-gap":24,"y-gap":24,cols:"2 s:2 m:2 l:4",responsive:"screen"},{default:a(()=>[s(e(d),null,{default:a(()=>[s(e(r),{class:"stat-card"},{default:a(()=>[t("div",R,[t("div",O,[s(e(_),{size:"48",color:"#7B1FA2"},{default:a(()=>[s(e(M))]),_:1})]),t("div",G,[o[0]||(o[0]=t("div",{class:"stat-title"},"学员总数",-1)),t("div",H,u(v.value),1)])])]),_:1})]),_:1}),s(e(d),null,{default:a(()=>[s(e(r),{class:"stat-card"},{default:a(()=>[t("div",P,[t("div",U,[s(e(_),{size:"48",color:"#7B1FA2"},{default:a(()=>[s(e(S))]),_:1})]),t("div",V,[o[1]||(o[1]=t("div",{class:"stat-title"},"请假总数",-1)),t("div",j,u(f.value),1)])])]),_:1})]),_:1}),s(e(d),null,{default:a(()=>[s(e(r),{class:"stat-card"},{default:a(()=>[t("div",D,[t("div",E,[s(e(_),{size:"48",color:"#7B1FA2"},{default:a(()=>[s(e(x))]),_:1})]),t("div",T,[o[2]||(o[2]=t("div",{class:"stat-title"},"违规总数",-1)),t("div",q,u(m.value),1)])])]),_:1})]),_:1})]),_:1})]))}}),X=F(J,[["__scopeId","data-v-06eddc5c"]]);export{X as default};
